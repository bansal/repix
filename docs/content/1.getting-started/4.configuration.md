---
title: Configuration
description: Customize Repix via config file and environment variables.
navigation:
  icon: i-lucide-settings
  title: Configuration
seo:
  title: Configuration - Repix
  description: Configure Repix with config.js and environment variables.
---

Repix supports configuration via both `config.js` and environment variables. Environment variables override config file settings.

## Config File

Create `config.js` from the example:

```bash
cp config.example.js config.js
```

### Available Options

| Option                        | Description                                      | Default                               |
| ----------------------------- | ------------------------------------------------ | ------------------------------------- |
| `prefix`                      | Source URL prefix when reconstructing image URLs | `https://`                            |
| `port`                        | Server port                                      | `3210`                                |
| `presets`                     | Object containing named transformation presets   | â€”                                     |
| `image.allowCustomTransforms` | Allow custom transformations beyond presets      | `true`                                |
| `image.allowDefaultPresets`   | Include default presets (xs, sm, md, lg, xl, full) | `true`                              |
| `image.allowOriginalImage`    | Allow `/original/{path}` to serve unprocessed images | `true`                           |
| `image.maxWidth`              | Maximum image width (pixels)                     | `2048`                                |
| `image.maxHeight`             | Maximum image height (pixels)                    | `2048`                                |
| `image.defaultQuality`        | Default JPEG/WebP quality (1-100)                | `85`                                  |
| `image.fetchTimeout`          | Timeout for fetching source images (ms)          | `10000`                               |
| `image.cacheControl`          | Cache-Control header value                       | `public, max-age=31536000, immutable` |
| `cors.origin`                 | CORS allowed origin                              | `*`                                   |
| `cors.credentials`            | CORS credentials                                 | `false`                               |

### Example Configuration

```javascript
export default {
  prefix: "https://",
  port: 3210,
  presets: {
    thumbnail: "w=200,h=200,fit=cover",
    banner: "w=1024,h=128,fit=cover",
    avatar: "w=100,h=100,fit=cover,f=webp,q=85",
  },
};
```

## Environment Variables

Override any config via environment variables:

| Variable                  | Description                          |
| ------------------------- | ------------------------------------ |
| `NODE_ENV`                | Environment (e.g., `production`)     |
| `PORT`                    | Server port                          |
| `PREFIX`                  | Source URL prefix                    |
| `MAX_WIDTH`               | Max image width                      |
| `MAX_HEIGHT`              | Max image height                     |
| `DEFAULT_QUALITY`         | Default quality                      |
| `FETCH_TIMEOUT`           | Fetch timeout (ms)                   |
| `CACHE_CONTROL`           | Cache-Control header                 |
| `CORS_ORIGIN`             | CORS origin                          |
| `CORS_CREDENTIALS`        | CORS credentials                     |
| `ALLOW_CUSTOM_TRANSFORMS` | Allow custom transforms (true/false) |
| `ALLOW_DEFAULT_PRESETS`   | Include default presets (true/false) |
| `ALLOW_ORIGINAL_IMAGE`    | Allow `/original/*` endpoint (true/false) |
| `PRESETS`                 | JSON object of presets               |

### Presets via Environment

```bash
PRESETS='{"thumbnail":"w=200,h=200,fit=cover","banner":"w=1024,h=128"}'
```

## Original Image Endpoint

When `allowOriginalImage` is `true`, you can serve images without processing:

```http
https://your-domain.com/original/example.com/path/to/image.jpg
```

This fetches and returns the source image as-is (no resize, format conversion, etc.). Set to `false` to disable and return 403.

## Security: Preset-Only Mode

Restrict image transformations to predefined presets only by setting `allowCustomTransforms` to `false`:

```javascript
export default {
  image: {
    allowCustomTransforms: false,
    maxWidth: 2048,
    maxHeight: 2048,
  },
  presets: {
    thumbnail: "w=200,h=200,fit=cover,f=webp,q=85",
    banner: "w=1024,h=128,fit=cover,f=webp,q=85",
  },
};
```

When `allowCustomTransforms` is `false`, only preset names can be used in URLs. Any custom parameters will return a `403` error.
