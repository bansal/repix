---
title: Fly.io
description: Deploy Repix to Fly.io for global edge deployment.
navigation:
  icon: i-simple-icons-flydotio
  title: Fly.io
seo:
  title: Deploy to Fly.io - Repix
  description: Step-by-step guide to deploy Repix on Fly.io.
---

[Fly.io](https://fly.io) runs containers globally. Repix's Dockerfile works with minimal configuration.

## Prerequisites

Install the Fly CLI:

```bash
# macOS / Linux
curl -L https://fly.io/install.sh | sh

# Or with Homebrew
brew install flyctl
```

Log in:

```bash
fly auth login
```

## Deploy Steps

### 1. Launch the App

From your repix repository:

```bash
cd repix
fly launch
```

During setup:

- **App name**: `repix` or custom
- **Region**: Pick primary region (e.g., `iad` for US East)
- **Postgres/Redis**: No (press Enter to skip)
- **Deploy now**: Yes

### 2. Configure fly.toml

The generated `fly.toml` should work. Ensure the port matches:

```toml
# fly.toml
app = "repix"

[build]

[env]
  NODE_ENV = "production"
  PORT = "3210"

[[services]]
  internal_port = 3210
  protocol = "tcp"

  [[services.ports]]
    port = 80
    handlers = ["http"]

  [[services.ports]]
    port = 443
    handlers = ["tls", "http"]

  [services.concurrency]
    type = "requests"
    hard_limit = 25
    soft_limit = 20

  [[services.http_checks]]
    interval = "30s"
    timeout = "5s"
    path = "/health"
```

### 3. Set Secrets (Optional)

```bash
fly secrets set PREFIX=https://
fly secrets set MAX_WIDTH=2048
fly secrets set MAX_HEIGHT=2048
```

### 4. Deploy

```bash
fly deploy
```

Your app is at:

```text
https://repix.fly.dev
```

## Custom Domain

```bash
fly certs add images.yourdomain.com
```

Add a CNAME record pointing to `repix.fly.dev`.

## Scaling

```bash
# Scale to 2 instances
fly scale count 2

# Use a larger machine for image processing
fly scale vm shared-cpu-2x
```

## Health Check

Fly uses the `path = "/health"` in `http_checks`. Repix's `/health` endpoint satisfies this.
